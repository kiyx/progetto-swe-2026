@startuml BugBoard26_Final_Architecture
!theme plain
hide stereotype
skinparam backgroundColor white
skinparam shadowing false
skinparam linetype ortho
skinparam defaultFontName "Segoe UI"
skinparam defaultFontSize 14
skinparam roundcorner 15

' Setup Spaziature per evitare sovrapposizioni
skinparam nodesep 60
skinparam ranksep 100

' Icone
!include <tupadr3/devicons2/java>
!include <tupadr3/devicons2/spring>
!include <tupadr3/devicons2/postgresql>
!include <tupadr3/devicons2/docker>
!include <tupadr3/font-awesome-5/user>

left to right direction

' --- STILI ---
skinparam rectangle {
    BorderThickness 1
    BorderColor #DDDDDD
    FontColor #333333
}

skinparam arrow {
    Color #555555
    Thickness 1.5
}

' --- 1. CLIENT LAYER (MVC) ---
rectangle "<b>Client Workstation</b>" as client_node #E3F2FD {
    
    rectangle "<$java>\n<b>Frontend Application</b>\n<<MVC Pattern>>" as frontend #BBDEFB {
        rectangle "<b>View</b>\n(Java Swing / FlatLaf)" as view #FFFFFF
        rectangle "<b>Controller</b>\n(Event Handling)" as controller #FFFFFF
        rectangle "<b>Model / Service</b>\n(Data & Network)" as proxy #FFFFFF
        
        ' Allineamento verticale interno
        view -[hidden]-> controller
        controller -[hidden]-> proxy
    }
}

' --- 2. SERVER LAYER (Docker + Layered) ---
rectangle "<b>Server Host</b>" as server_node #F1F8E9 {

    rectangle "<$docker>\n<b>Docker Container</b>" as docker #C8E6C9 {
    
        rectangle "<$spring>\n<b>Spring Boot Backend</b>\n<<Layered Architecture>>" as backend #A5D6A7 {
            rectangle "<b>Web Layer</b>\n(Controllers & Security)" as web #FFFFFF
            rectangle "<b>Service Layer</b>\n(Business Logic)" as service #FFFFFF
            rectangle "<b>Data Access Layer</b>\n(JPA Repositories/Model)" as repo #FFFFFF
            
            ' Allineamento verticale interno
            web -[hidden]-> service
            service -[hidden]-> repo
        }
    }
}

' --- 3. DATA LAYER ---
rectangle "<b>Cloud Infrastructure</b>" as data_node #FFF3E0 {
    rectangle "<$postgresql>\n<b>Neon Cloud (AWS)</b>\n(PostgreSQL DB)" as db #FFE0B2
}

' --- ATTORI ---
actor "User" as user

' --- FLUSSO E RELAZIONI ---

' 1. Utente usa la View
user -r-> view : "Uses"

' 2. Frontend chiama Backend (Protocollo HTTP)
proxy -r-> web : " HTTP / JSON \n (JWT Token)"

' 3. Backend chiama Database (Protocollo JDBC)
repo -r-> db : " JDBC (SSL) \n (Read/Write)"

@enduml